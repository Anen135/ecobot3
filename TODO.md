

## üìú –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π –≤ 2D-–¥–≤–∏–∂–∫–µ

### üéØ –¶–µ–ª—å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –∫–æ–ª–ª–∏–∑–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–π –ª—é–±—ã–µ –∏–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç:

* —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è—Ö;
* –ø–æ-—Ä–∞–∑–Ω–æ–º—É —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞;
* –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –¥–≤–∏–∂–µ–Ω–∏–µ;
* –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤—ã–±–æ—Ä–æ—á–Ω–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≥–µ–Ω—Ç ‚Äî —Å –µ–¥–æ–π, –Ω–æ –Ω–µ —Å —Ñ–æ–Ω–æ–º).

---

### üß± –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. **–ö–æ–ª–ª–∏–∑–∏—è ‚Äî —Ñ–∞–∫—Ç –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤**

* –û–±—ä–µ–∫—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –∏—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ `Rect`).
* –§–æ—Ä–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º `get_rect()`, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `pygame.Rect`.

#### 2. **–£—á–∞—Å—Ç–∏–µ –≤ –∫–æ–ª–ª–∏–∑–∏—è—Ö**

* **–í—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏** —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –∫–æ–ª–ª–∏–∑–∏–π.
* –ò—Å–∫–ª—é—á–µ–Ω–∏–µ: –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–ª–∏ –Ω–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã ‚Äî –∏—Ö –º–æ–∂–Ω–æ –∏—Å–∫–ª—é—á–∏—Ç—å –ª–æ–≥–∏–∫–æ–π (`skip_collision_check()`).

#### 3. **–†–µ–∞–∫—Ü–∏—è –Ω–∞ –∫–æ–ª–ª–∏–∑–∏—é ‚Äî —á–µ—Ä–µ–∑ `on_collision(other, world)`**

–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ:

```python
def on_collision(self, other: Entity, world: World):
    pass
```

* –û–±—ä–µ–∫—Ç **—Å–∞–º —Ä–µ—à–∞–µ—Ç**, —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–∏ —Å –¥—Ä—É–≥–∏–º.
* –ü—Ä–∏–º–µ—Ä—ã:

  * üçé **–ï–¥–∞**: –∏—Å—á–µ–∑–∞–µ—Ç, –µ—Å–ª–∏ –≤ –Ω–µ—ë –≤—Ä–µ–∑–∞–µ—Ç—Å—è –∞–≥–µ–Ω—Ç.
  * üß± **–ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ**: –æ—Ç–º–µ–Ω—è–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞.
  * ‚ò†Ô∏è **–í—Ä–∞–≥**: –Ω–∞–Ω–æ—Å–∏—Ç —É—Ä–æ–Ω.
  * üåÄ **–ó–æ–Ω–∞**: –º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞.
  * üåü **–≠—Ñ—Ñ–µ–∫—Ç**: –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ (–ø—É—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è).

#### 4. **–§–ª–∞–≥ `blocks_movement`**

* –û—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ (`True`/`False`), –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ.
* –ú–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –æ—Ç–º–µ–Ω—ã –¥–≤–∏–∂–µ–Ω–∏—è:

```python
if other.blocks_movement:
    entity.revert_position()
```

#### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–π –≤ `World`**

* –ú–µ—Ç–æ–¥ `handle_collisions()`:

  * –ü—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –ø–∞—Ä–∞–º –æ–±—ä–µ–∫—Ç–æ–≤
  * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç `colliderect`
  * –í—ã–∑—ã–≤–∞–µ—Ç `on_collision()` —Å –∫–∞–∂–¥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã:

```python
entity.on_collision(other, self)
other.on_collision(entity, self)
```

---

### üß™ –ü—Ä–∏–º–µ—Ä –ø–æ–≤–µ–¥–µ–Ω–∏—è

#### üçé –ï–¥–∞

```python
class Food(Entity):
    def on_collision(self, other, world):
        if isinstance(other, Agent):
            other.score += 1
            world.entities.remove(self)
```

#### üß± –ü—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ

```python
class Obstacle(Entity):
    blocks_movement = True

    def on_collision(self, other, world):
        if hasattr(other, 'revert_position'):
            other.revert_position()
```

#### ‚ò†Ô∏è –í—Ä–∞–≥

```python
class Enemy(Entity):
    def on_collision(self, other, world):
        if isinstance(other, Agent):
            other.health -= 10
```

---

### üîç –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

* ‚úÖ –ö—Ä—É–≥–æ–≤—ã–µ –∫–æ–ª–ª–∏–∑–∏–∏ (`circle_radius`, `distance_to`)
* ‚úÖ –ö–æ–ª–ª–∏–∑–∏–∏ –ø–æ —Å–ª–æ—è–º (`collision_layer`) –∏ –º–∞—Å–∫–∞–º (`collides_with`)
* ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏
* ‚úÖ –í—ã—Ö–æ–¥–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, `on_exit_collision()`)

---

### üìå –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–ª–ª–∏–∑–∏–π –º–µ–∂–¥—É –≤—Å–µ–º–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏.
* –†–µ–∞–∫—Ü–∏—è –∑–∞–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ `on_collision()`, –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ –ø–æ —Ç–∏–ø–∞–º.
* –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è.
* –ì–∏–±–∫–æ—Å—Ç—å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.
